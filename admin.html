<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Admin ‚Ä¢ Zenelej√°tsz√≥</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<div class="container">
  <aside class="sidebar">
    <div class="brand">
      <div class="dot"></div>
      <div>
        <div style="font-weight:800; letter-spacing:.2px">Admin</div>
        <div class="small">GitHub commit ment√©s (mappa n√©lk√ºl)</div>
      </div>
    </div>

    <nav class="nav">
      <a href="./">‚¨ÖÔ∏è Vissza a lej√°tsz√≥hoz</a>
      <a class="active" href="./admin.html">‚öôÔ∏è Admin</a>
    </nav>

    <div class="sidecard">
      <div class="small">√Ållapot</div>
      <div style="margin-top:10px" class="row">
        <span class="chip">üíæ <span id="saveState">‚Äî</span></span>
        <span class="chip">üßæ <span id="libCount">0</span></span>
      </div>
      <p class="small" style="margin-top:12px">
        Autosave: ha v√°ltoztatsz a list√°n, p√°r mp-en bel√ºl commitol.
      </p>
    </div>
  </aside>

  <main class="main">
    <div class="topbar">
      <div>
        <div class="h1">K√∂nyvt√°r kezel√©se</div>
        <div class="muted">Link beilleszt√©s ‚Üí auto kit√∂lt√©s. Felt√∂lt√©s ‚Üí repo rootba ment.</div>
      </div>
      <div class="row">
        <button class="btn" id="testBtn">üîå Kapcsolat teszt</button>
        <button class="btn danger" id="wipeDraft">üßπ Draft t√∂rl√©s</button>
      </div>
    </div>

    <div class="formgrid">
      <div class="panel">
        <div class="small">GitHub be√°ll√≠t√°s (localStorage)</div>

        <div class="field">
          <label>Owner</label>
          <input id="ghOwner" placeholder="pl. tesouser"/>
        </div>
        <div class="field">
          <label>Repo</label>
          <input id="ghRepo" placeholder="pl. zenelojatszo"/>
        </div>
        <div class="field">
          <label>Branch</label>
          <input id="ghBranch" placeholder="main"/>
        </div>
        <div class="field">
          <label>Token (fine-grained PAT)</label>
          <input id="ghToken" placeholder="ghp_..." type="password"/>
          <div class="small">Jogosults√°g: <span class="kbd">Contents: Read and write</span> (csak erre a rep√≥ra).</div>
        </div>

        <div class="row">
          <button class="btn primary" id="saveCfg">Ment√©s</button>
          <div class="small" id="cfgHint">‚Äî</div>
        </div>
      </div>

      <div class="panel">
        <div class="small">√öj track</div>

        <div class="field">
          <label>YouTube vagy Spotify link (paste ‚Üí auto kit√∂lt)</label>
          <input id="link" placeholder="https://..." />
          <div class="small">Nem kell gomb: ha beilleszted, kit√∂lti a c√≠met (oEmbed).</div>
        </div>

        <div class="field">
          <label>C√≠m</label>
          <input id="title" placeholder="Track c√≠m"/>
        </div>

        <div class="field">
          <label>Kiad√≥ / El≈ëad√≥(k) (vessz≈ëvel t√∂bb is)</label>
          <input id="artists" placeholder="pl. Aki √ânekli, Producer"/>
        </div>

        <div class="row">
          <div class="field" style="flex:1; margin:0">
            <label>MP3 f√°jl (opcion√°lis)</label>
            <input id="mp3" type="file" accept="audio/mpeg,audio/mp3"/>
          </div>
          <div class="field" style="flex:1; margin:0">
            <label>Bor√≠t√≥ (opcion√°lis)</label>
            <input id="cover" type="file" accept="image/*"/>
          </div>
        </div>

        <div class="row" style="margin-top:12px">
          <button class="btn primary" id="addTrack">‚ûï Hozz√°ad√°s a k√∂nyvt√°rhoz</button>
          <span class="small" id="addHint">‚Äî</span>
        </div>
      </div>
    </div>

    <div class="panel" style="margin-top:14px">
      <div class="row" style="justify-content:space-between">
        <div>
          <div style="font-weight:800">K√∂nyvt√°r</div>
          <div class="small">Minden m√≥dos√≠t√°s autosave (debounce).</div>
        </div>
        <div class="row">
          <button class="btn" id="refreshLib">üîÑ Friss√≠t√©s</button>
          <button class="btn danger" id="forceSave">üí• Ment√©s most</button>
        </div>
      </div>

      <div style="overflow:auto; margin-top:10px">
        <table class="table">
          <thead>
            <tr>
              <th style="min-width:220px">C√≠m</th>
              <th style="min-width:220px">El≈ëad√≥/Kiad√≥</th>
              <th>MP3</th>
              <th>Linkek</th>
              <th style="min-width:170px">M≈±velet</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </div>

  </main>
</div>

<div id="toast" class="toast"></div>

<script src="utils.js"></script>
<script src="admin.js"></script>
</body>
</html>
